{"version":3,"sources":["../src/confirm.js"],"names":["formSubmit","event","preventDefault","confirmNotices","confirmElements","target","querySelectorAll","forEach","element","type","checked","dataset","confirm","push","labels","textContent","trim","value","window","console","log","init","formid","form","document","getElementById","addEventListener"],"mappings":"mIA4BMA,CAAAA,CAAU,CAAG,SAACC,CAAD,CAAW,CAC1BA,CAAK,CAACC,cAAN,GAD0B,GAEtBC,CAAAA,CAAc,CAAG,EAFK,CAKpBC,CAAe,CAAGH,CAAK,CAACI,MAAN,CAAaC,gBAAb,CAA8B,gBAA9B,CALE,CAM1BF,CAAe,CAACG,OAAhB,CAAwB,SAACC,CAAD,CAAa,CAEjC,GAAqB,UAAjB,GAAAA,CAAO,CAACC,IAAR,EAA+BD,CAAO,CAACE,OAAR,KAAkCF,CAAO,CAACG,OAAR,CAAgBC,OAArF,CAAgG,CAC5FT,CAAc,CAACU,IAAf,CAAoBL,CAAO,CAACM,MAAR,CAAe,CAAf,EAAkBC,WAAlB,CAA8BC,IAA9B,EAApB,CACH,CAFD,IAEQ,IAA8B,WAAzB,QAAOR,CAAAA,CAAO,CAACS,KAAhB,EAA0CT,CAAO,CAACS,KAAR,EAAiBT,CAAO,CAACG,OAAR,CAAgBC,OAA/E,CAAwF,CAC5FT,CAAc,CAACU,IAAf,CAAoBL,CAAO,CAACM,MAAR,CAAe,CAAf,EAAkBC,WAAlB,CAA8BC,IAA9B,EAApB,CACH,CACJ,CAPD,EASAE,MAAM,CAACC,OAAP,CAAeC,GAAf,CAAmBjB,CAAnB,CACH,C,QAOmB,QAAPkB,CAAAA,IAAO,CAACC,CAAD,CAAY,CAE5B,GAAMC,CAAAA,CAAI,CAAGC,QAAQ,CAACC,cAAT,CAAwBH,CAAxB,CAAb,CACAC,CAAI,CAACG,gBAAL,CAAsB,QAAtB,CAAgC1B,CAAhC,CACH,C","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Chart data JS module.\n *\n * @module     core_form/confirm\n * @copyright  2022 Matt Porritt <mattp@catalyst-au.net>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n/**\n * Handle the form submission event and gather the confirm conditions.\n *\n * @param {event} event The form submission event.\n */\nconst formSubmit = (event) => {\n    event.preventDefault();\n    let confirmNotices = [];\n\n    // Get all form elements that have data confirm attributes.\n    const confirmElements = event.target.querySelectorAll('[data-confirm]');\n    confirmElements.forEach((element) => {\n        // Custom handling depending on data type.\n        if (element.type === 'checkbox' && element.checked != Boolean(Number(element.dataset.confirm))) {\n            confirmNotices.push(element.labels[0].textContent.trim());\n        }  else if ((typeof element.value !== 'undefined') && element.value != element.dataset.confirm) {\n            confirmNotices.push(element.labels[0].textContent.trim());\n        }\n    });\n\n    window.console.log(confirmNotices);\n};\n\n/**\n * Initialise method for confirmation display.\n *\n * @param {string} formid The id of the form the confirm applies to.\n */\nexport const init = (formid) => {\n    // Add submit even listener to the form.\n    const form = document.getElementById(formid);\n    form.addEventListener('submit', formSubmit);\n};\n"],"file":"confirm.min.js"}